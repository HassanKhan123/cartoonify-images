(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{217:function(e,t){},219:function(e,t){},258:function(e,t){},260:function(e,t){},288:function(e,t){},290:function(e,t){},291:function(e,t){},296:function(e,t){},298:function(e,t){},304:function(e,t){},306:function(e,t){},325:function(e,t){},337:function(e,t){},340:function(e,t){},352:function(e,t){},462:function(e){e.exports=JSON.parse("{}")},464:function(e,t,n){},465:function(e,t,n){"use strict";n.r(t);var c=n(9),a=n.n(c),o=n(199),r=n.n(o),s=n(108),i=n(33),u=n.n(i),l=n(69),f=n(15),b=(n(206),n(200),n(443),n.p+"static/media/xord.b85d76ef.jpg"),d=(n.p,n.p,n.p,n(462),n(14)),j=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)(),o=Object(f.a)(a,2),r=(o[0],o[1]),i=Object(c.useState)(null),j=Object(f.a)(i,2),p=j[0],h=j[1],O=Object(c.useState)(null),g=Object(f.a)(O,2),m=g[0],v=g[1],w=Object(c.useState)(null),x=Object(f.a)(w,2),R=x[0],S=x[1],k=Object(c.useState)(null),E=Object(f.a)(k,2),L=(E[0],E[1]),U=Object(c.useState)(null),y=Object(f.a)(U,2),D=(y[0],y[1]),I=Object(c.useState)(!1),M=Object(f.a)(I,2),z=M[0],A=M[1],B=Object(c.useState)(b),C=Object(f.a)(B,2),P=(C[0],C[1],Object(c.useState)(null)),F=Object(f.a)(P,2),N=(F[0],F[1],Object(c.useRef)(null)),T=Object(c.useRef)(null),J=Object(c.useState)({model:"",size:384,source:N.current,canvas:T.current,path:""}),G=Object(f.a)(J,2),W=G[0],q=G[1];function V(){return(V=Object(l.a)(u.a.mark((function e(t){var n,c,a,o,i,l,b,d,j,p,h,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,e.next=4,window.tf.loadGraphModel("https://firebasestorage.googleapis.com/v0/b/gitex-demo.appspot.com/o/models%2Fmodel.json?alt=media&token=64bd8fa4-815f-4e3b-8140-8a2f5d8ba617");case 4:return n=e.sent,q(Object(s.a)(Object(s.a)({},W),{},{model:n})),e.prev=6,console.log("PREDICT RAN============================"),c=window.tf.browser.fromPixels(N.current),a=c.shape,o=Object(f.a)(a,2),i=o[0],l=o[1],c=X(c),console.log("PRED"),b=performance.now(),d=performance.now()-b,e.prev=15,e.next=18,n.predict(c,{batchSize:1});case 18:return p=e.sent,console.log("RES================",p),e.next=22,p.squeeze().sub(window.tf.scalar(-1)).div(window.tf.scalar(2)).clipByValue(0,1);case 22:j=e.sent,h=Math.round(Math.abs(i-l)/Math.max(i,l)*W.size),O=i>l?[0,h,0]:[h,0,0],j=j.slice(O),console.log("IMAGE OUT,",j,a),Y(j,a),console.log(Math.round(d/1e3*10)/10),console.log("RESULT=============",c),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(15),console.log("ERROR============",e.t0);case 35:e.next=42;break;case 37:e.prev=37,e.t1=e.catch(6),console.log("ERRR===================",e.t1),console.warn("WARN ==================",e.t1),S(null);case 42:r(t),console.log("Load model success"),e.next=51;break;case 46:e.prev=46,e.t2=e.catch(1),S(null),console.log(e.t2),A(!1);case 51:case"end":return e.stop()}}),e,null,[[1,46],[6,37],[15,32]])})))).apply(this,arguments)}Object(c.useEffect)((function(){R&&function(e){V.apply(this,arguments)}()}),[R]);var H=function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){t(c.result)},c.onerror=function(e){n(e)}}))},K=function(){var e=Object(l.a)(u.a.mark((function e(t){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files[0],console.log("FILES===================",c),n(c),e.next=5,H(c);case 5:a=e.sent,v(a),h(URL.createObjectURL(c));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),S(m);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function X(e){var t=Object(f.a)(e.shape,2),n=t[0],c=t[1],a=n>c?[[0,0],[n-c,0],[0,0]]:[[c-n,0],[0,0],[0,0]];e=e.pad(a);var o=W.size;e=window.tf.image.resizeBilinear(e,[o,o]).reshape([1,o,o,3]);var r=window.tf.scalar(127.5);return e.sub(r).div(r)}function Y(e,t){var n=t[0]/e.shape[0];window.tf.browser.toPixels(e,T.current),setTimeout((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;A(!1);var t=T.current;console.log("CW===========",t);var n=document.createElement("canvas"),c=n.getContext("2d"),a=t.width,o=t.height;n.width=a,n.height=o,c.drawImage(t,0,0),t.width*=e,t.height*=e,t.getContext("2d").drawImage(n,0,0,a,o,0,0,a*e,o*e),console.log("object,",t.toDataURL("image/jpeg")),L(t.toDataURL("image/jpeg")),D(t.toDataURL("image/jpeg"))}(n)}),50)}return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h1",{children:"Remove Background From Image"}),Object(d.jsxs)("form",{onSubmit:Q,children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",onChange:K})}),p&&Object(d.jsx)("img",{src:p,height:400,width:400,ref:N}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"Remove Background"})})]}),z&&Object(d.jsx)("h3",{children:"Loading..."}),Object(d.jsx)("canvas",{ref:T})]})};n(464);r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(j,{})}),document.getElementById("root"))}},[[465,1,2]]]);
//# sourceMappingURL=main.ea95e45f.chunk.js.map